<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.doublecome.repository.mapper.FileMapper">	
	<!-- 파일 정보 -->
	<select id="selectOneFile" parameterType="int" resultType="UtilFile">
		select *
		  from file
		 where file_no = #{fileNo}
	</select>
	
	<select id="maxFileGroupCode" resultType="int">
		select max(file_group_code)
		from file
	</select>
	
	<insert id="addFile" parameterType="UtilFile" >
		<selectKey order="AFTER" keyProperty="fileNo" keyColumn="file_no" resultType="int">
			select max(file_no)
			  from file
		</selectKey>
		insert into file (file_group_code, file_origin_name, file_system_name, file_path)
		values (#{fileGroupCode}, #{fileOriginName}, #{fileSystemName}, #{filePath})
	</insert>
</mapper>